<!DOCTYPE html>

<html lang="en">
  <head>
    <title>DappHero HTML Generation</title>

    <meta charset="UTF-8" />
    <meta name="author" content="DappHero" />
    <meta name="description" content="DappHero" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://unpkg.com/mvp.css" />
  </head>

  <body>
    <header>
      <nav>
        <img
          alt="Logo"
          src="//s3.amazonaws.com/appforest_uf/f1580782353653x261239071988881950/noun_Sandwich_3059105.png"
          height="70"
        />
        <ul>
          <li>Menu Item 1</li>
          <li><a href="#">Menu Item 2</a></li>
          <li>
            <a href="#">Dropdown Menu Item</a>
            <ul>
              <li><a href="#">Sublink with a long name</a></li>
              <li><a href="#">Short sublink</a></li>
            </ul>
          </li>
        </ul>
      </nav>
      <h1>Perfect-edmund-58</h1>
      <p>
        <mark>
          Powered by <a href="https://www.dapphero.io">DappHero.io</a>
        </mark>
      </p>
      <p>
        This is a description of what you are trying to do with your project.
        Edit it so you have something snazzy!
      </p>
      <br />
      <p>
        <button data-dh-feature="network" data-dh-property-enable="true">
          Enable Web3
        </button>
      </p>
    </header>
    <div id="newContract"></div>
    <div>
      <section><h2>TokenFactory---Mainnet</h2></section>
      <header>
        <section>
          <section><h2>Public Methods</h2></section>
          <header>
            <div
              data-dh-feature="customContract"
              data-dh-property-method-id="vpIi"
              data-dh-property-auto-invoke="false"
              data-dh-property-contract-name="TokenFactory---Mainnet"
              data-dh-property-method-name="createdContracts"
            >
              <h3>Method <mark>"createdContracts"</mark></h3>
              <section>
                <aside>
                  <section>
                    Input name: <i>anonymous input</i>
                    <input
                      type="text"
                      placeholder="uint256"
                      data-dh-property-method-id="vpIi"
                      data-dh-property-input-name="[0]"
                    />
                  </section>
                  <div
                    data-dh-property-method-id="vpIi"
                    data-dh-property-output-name="token"
                  >
                    <pre>Output...</pre>
                  </div>
                  <div
                    data-dh-property-method-id="vpIi"
                    data-dh-property-output-name="creator"
                  >
                    <pre>Output...</pre>
                  </div>
                  <div
                    data-dh-property-method-id="vpIi"
                    data-dh-property-output-name="initialSupply"
                  >
                    <pre>Output...</pre>
                  </div>

                  <button
                    data-dh-property-invoke="true"
                    data-dh-property-method-id="vpIi"
                  >
                    createdContracts
                  </button>
                </aside>
              </section>
            </div>
          </header>
        </section>
      </header>
      <header>
        <section>
          <section><h2>Transaction Methods</h2></section>
          <header>
            <div
              data-dh-feature="customContract"
              data-dh-property-method-id="yNXV"
              data-dh-property-auto-invoke="false"
              data-dh-property-contract-name="TokenFactory---Mainnet"
              data-dh-property-method-name="createToken"
            >
              <h3>Method <mark>"createToken"</mark></h3>
              <section>
                <aside>
                  <section>
                    Input name: <i>name</i>
                    <input
                      type="text"
                      placeholder="string"
                      data-dh-property-method-id="yNXV"
                      data-dh-property-input-name="name"
                    />
                  </section>
                  <section>
                    Input name: <i>symbol</i>
                    <input
                      type="text"
                      placeholder="string"
                      data-dh-property-method-id="yNXV"
                      data-dh-property-input-name="symbol"
                    />
                  </section>
                  <section>
                    Input name: <i>supply</i>
                    <input
                      type="text"
                      placeholder="uint256"
                      data-dh-property-method-id="yNXV"
                      data-dh-property-input-name="supply"
                    />
                  </section>

                  <button
                    data-dh-property-invoke="true"
                    data-dh-property-method-id="yNXV"
                  >
                    createToken
                  </button>
                </aside>
              </section>
            </div>
          </header>
        </section>
      </header>
    </div>
    <script
      id="dh-apiKey"
      data-api="1592330159497x384868225501626400"
      src=""
    ></script>
    <style>
      form {
        margin: 40px;
      }
    </style>

    <script>

const newABI = [
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "symbol",
				"type": "string"
			},
			{
				"internalType": "uint256",
				"name": "supply",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "subtractedValue",
				"type": "uint256"
			}
		],
		"name": "decreaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "addedValue",
				"type": "uint256"
			}
		],
		"name": "increaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "recipient",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "sender",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "recipient",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	}
]
      document.addEventListener(
        "dappHeroConfigLoaded",
        ({ detail: dappHero }) => {
          // Inside here you can listen to any event you want
          console.log("DappHero Has Loaded!");

          // For projects with auto-invoked method, you will want to filter on events
          // dappHero.listenToTransactionStatusChange(data => {
          //   console.log("Listening to transtaction status change", data);
          // });

          // This is how you can listen to any events your smart contract emits
          dappHero.listenToSmartContractBlockchainEvent((data) => {
            console.log("The blockChain Events: ", data);
            const contractArgs = data.value.args
            const contractName = contractArgs.tokenName
            const contractAddress = contractArgs.contractAddress
            const networkId = 4
            const projectId = 10
            const contractAbi = newABI
            console.log("Trigger", data)
            if(data.value?.args){

              function addElement () { 
  // create a new div element 
  var newDiv = document.createElement("div"); 
  newDiv.setAttribute('data-dh-feature', 'customContract')
  newDiv.setAttribute('data-dh-property-method-id', '100')
  newDiv.setAttribute('data-dh-property-auto-invoke', 'true')
  newDiv.setAttribute('data-dh-property-contract-name', contractName)
  newDiv.setAttribute('data-dh-property-method-name', "name")
  // and give it some content 
  var newContent = document.createTextNode("ContractName"); 
  var outputs = document.createElement("div")
  outputs.setAttribute('data-dh-property-method-id', '100')
  outputs.setAttribute('data-dh-property-outputs', 'true')


  // add the text node to the newly created div
  newDiv.appendChild(newContent)
  newDiv.appendChild(outputs);  

  // add the newly created element and its content into the DOM 
  var currentDiv = document.getElementById("newContract"); 
  document.body.insertBefore(newDiv, currentDiv); 
}



window.dappHero.addClientSideContract({
  contractName, contractAddress, networkId, projectId, contractAbi
})

addElement()


            }
          });

        }
      );
    </script>
  </body>
</html>
